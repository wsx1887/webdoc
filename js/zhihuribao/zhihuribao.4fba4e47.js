(function(t){function e(e){for(var i,r,c=e[0],o=e[1],l=e[2],d=0,h=[];d<c.length;d++)r=c[d],n[r]&&h.push(n[r][0]),n[r]=0;for(i in o)Object.prototype.hasOwnProperty.call(o,i)&&(t[i]=o[i]);u&&u(e);while(h.length)h.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],i=!0,c=1;c<a.length;c++){var o=a[c];0!==n[o]&&(i=!1)}i&&(s.splice(e--,1),t=r(r.s=a[0]))}return t}var i={},n={"zhihuribao/zhihuribao":0},s=[];function r(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=i,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(a,i,function(e){return t[e]}.bind(null,i));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=o;s.push([1,"chunk-vendors"]),a()})({"066f":function(t,e,a){},1:function(t,e,a){t.exports=a("7638")},"42a6":function(t,e,a){"use strict";var i=a("6796"),n=a.n(i);n.a},"5b63":function(t,e,a){"use strict";var i=a("066f"),n=a.n(i);n.a},6796:function(t,e,a){},7638:function(t,e,a){"use strict";a.r(e);a("cadf"),a("551c"),a("f751"),a("097d");var i=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"daily",attrs:{id:"app"}},[a("div",{staticClass:"daily-menu"},[a("div",{staticClass:"daily-menu-item",class:{active:"recentNews"===t.active},on:{click:t.handleToRecentNews}},[t._v("最新消息")]),a("div",{staticClass:"daily-menu-item",class:{active:"hotNews"===t.active},on:{click:t.handleToHotNews}},[t._v("热门消息")]),a("div",{staticClass:"daily-menu-item",class:{active:"dayNews"===t.active},on:{click:t.handleToDayNews}},[t._v("每日消息")])]),a("div",{staticClass:"daily-list",attrs:{id:"dailylist"},on:{scroll:function(e){return e.stopPropagation(),t.scrollLoadDayNews(e)}}},["recentNews"===t.active?[a("div",{staticClass:"daily-list-date"},[t._v(t._s(t.formatDay(t.recentNews.date)))]),t._l(t.recentNews.stories,function(e,i){return a("daily-list-item",{key:i+1e3,class:{active:e.id===t.articleId},attrs:{Story:{title:e.title,image:e.images[0]}},nativeOn:{click:function(a){return t.handleClick(e.id)}}})})]:t._e(),"hotNews"===t.active?t._l(t.hotNews.recent,function(e){return a("daily-list-item",{key:e.news_id,class:{active:e.news_id===t.articleId},attrs:{Story:{title:e.title,image:e.thumbnail}},nativeOn:{click:function(a){return t.handleClick(e.news_id)}}})}):t._e(),"dayNews"===t.active?t._l(t.dayNews,function(e){return a("div",{key:e.date},[a("div",{staticClass:"daily-list-date"},[t._v(t._s(t.formatDay(e.date)))]),t._l(e.stories,function(e){return a("daily-list-item",{key:e.id,class:{active:e.id===t.articleId},attrs:{Story:{title:e.title,image:e.images[0]}},nativeOn:{click:function(a){return t.handleClick(e.id)}}})})],2)}):t._e()],2),a("div",{staticClass:"daily-article"},[a("dailyArticle",{attrs:{id:t.articleId}})],1)])},s=[],r=(a("96cf"),a("3b8d")),c={proxy:{baseUrl:"/api/proxy/"}},o=a("bc3a"),l=a.n(o),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("a",{staticClass:"daily-list-item"},[a("img",{staticClass:"daily-list-item-img",attrs:{src:t.baseUrl+t.Story.image,alt:"标题图片"}}),a("div",{staticClass:"daily-list-item-title"},[t._v(t._s(t.Story.title))])])},d=[],h={name:"daily-list-item",props:{Story:{type:Object,default:function(){return{image:"https://pic4.zhimg.com/v2-c0cc4498b47f594db385261275c8410f.jpg",title:"给我一节永远有电的五号电池，还你一个乌托邦"}}}},data:function(){return{baseUrl:c.proxy.baseUrl}}},m=h,f=(a("7a34"),a("2877")),v=Object(f["a"])(m,u,d,!1,null,"0a325704",null),p=v.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.id?a("div",{attrs:{id:"daily-article"}},[a("div",{staticClass:"daily-article-title"},[t._v(t._s(t.data.title))]),a("div",{staticClass:"daily-article-content",domProps:{innerHTML:t._s(t.data.body)}}),a("div",{staticClass:"daily-comments"},[a("div",{staticClass:"daily-article-extra"},[a("ul",[a("li",[a("a",[a("span",[t._v("点赞：")]),a("span",[t._v(t._s(t.extra.popularity))])])]),a("li",[a("a",[a("span",[t._v("总评：")]),a("span",[t._v(t._s(t.extra.comments))])])]),a("li",[a("a",{attrs:{href:"#long-comments"}},[a("span",[t._v("长评：")]),a("span",[t._v(t._s(t.extra.long_comments))])])]),a("li",[a("a",{attrs:{href:"#short-comments"}},[a("span",[t._v("短评：")]),a("span",[t._v(t._s(t.extra.short_comments))])])])])]),t.extra.long_comments?a("div",{attrs:{id:"long-comments"}},[a("ul",t._l(t.longComments,function(e){return a("li",{key:e.id},[a("div",{staticClass:"daily-comment-avatar"},[a("img",{attrs:{src:e.avatar,alt:"头像"}})]),a("div",{staticClass:"daily-comment-content"},[a("div",{staticClass:"daily-comment-user"},[a("span",{staticClass:"name"},[t._v(t._s(e.author))]),a("span",{staticClass:"time"},[t._v(t._s(t.formatTime(e.time)))]),a("span",{staticClass:"likes"},[t._v("点赞："+t._s(e.likes))])]),a("div",{staticClass:"daily-comment-text"},[t._v(t._s(e.content))])])])}),0)]):t._e(),t.extra.short_comments?a("div",{attrs:{id:"short-comments"}},[a("ul",t._l(t.shortComments,function(e){return a("li",{key:e.id},[a("div",{staticClass:"daily-comment-avatar"},[a("img",{attrs:{src:e.avatar,alt:"头像"}})]),a("div",{staticClass:"daily-comment-content"},[a("div",{staticClass:"daily-comment-user"},[a("span",{staticClass:"name"},[t._v(t._s(e.author))]),a("span",{staticClass:"time"},[t._v(t._s(t.formatTime(e.time)))]),a("span",{staticClass:"likes"},[t._v("点赞："+t._s(e.likes))])]),a("div",{staticClass:"daily-comment-text"},[t._v(t._s(e.content))])])])}),0)]):t._e()])]):t._e()},g=[],w=(a("a481"),a("c5f6"),{name:"daily-article",props:{id:{type:Number,default:0}},data:function(){return{data:{},extra:{},longComments:[],shortComments:[],baseUrl:c.proxy.baseUrl}},methods:{getArticle:function(){var t=this.baseUrl+"https://news-at.zhihu.com/api/4/news/"+this.id,e=this;l.a.get(t).then(function(t){var a=t.data;a.body=a.body.replace(/src="http/gi,'src="'+e.baseUrl+"http"),e.data=a,window.scrollTo(0,0),e.getExtra(),e.getLongComments(),e.getShortComments()})},getExtra:function(){var t=this,e=this.baseUrl+"https://news-at.zhihu.com/api/4/story-extra/"+this.id;l.a.get(e).then(function(e){t.extra=e.data})},getLongComments:function(){var t=this,e=this.baseUrl+"https://news-at.zhihu.com/api/4/story/"+this.id+"/long-comments";l.a.get(e).then(function(e){var a=e.data,i=a.comments.map(function(e){return e.avatar=t.baseUrl+e.avatar,e});t.longComments=i})},getShortComments:function(){var t=this,e=this.baseUrl+"https://news-at.zhihu.com/api/4/story/"+this.id+"/short-comments";l.a.get(e).then(function(e){var a=e.data,i=a.comments.map(function(e){return e.avatar=t.baseUrl+e.avatar,e});t.shortComments=i})},formatTime:function(t){var e=1e3*t,a=Date.now(),i=a-e,n=i/1e3;if(n<60)return Math.floor(n)+"秒前";var s=n/60;if(s<60)return Math.floor(s)+"分前";var r=s/60;if(r<24)return Math.floor(r)+"小时前";var c=r/24;if(c<8)return Math.floor(c)+"天前";var o=new Date(e);return[o.getFullYear(),o.getMonth()+1,o.getDate()].join("-")}},mounted:function(){this.getArticle()},watch:{id:function(t){t&&this.getArticle()}}}),b=w,_=(a("5b63"),Object(f["a"])(b,y,g,!1,null,"4c66351d",null)),C=_.exports,x={name:"app",components:{dailyListItem:p,dailyArticle:C},data:function(){return{articleId:0,hotNews:{},recentNews:{},dayNews:[],active:"recentNews",isLoading:!1,dayTime:Date.now()+864e5,baseUrl:c.proxy.baseUrl}},methods:{getHotNews:function(){var t=this.baseUrl+"https://news-at.zhihu.com/api/4/news/hot",e=this;l.a.get(t).then(function(t){e.hotNews=t.data})},getRecentNews:function(){var t=this.baseUrl+"https://news-at.zhihu.com/api/4/news/latest",e=this;l.a.get(t).then(function(t){e.recentNews=t.data})},getDayNews:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,a,i,n,s,r;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.isLoading=!0,e=new Date(this.dayTime),a=e.getFullYear(),i=e.getMonth()+1,n=e.getDate(),s=this.baseUrl+"https://news-at.zhihu.com/api/4/news/before/"+a+(i<10?"0"+i:i)+(n<10?"0"+n:n),t.next=8,l.a.get(s);case 8:r=t.sent,this.dayNews.push(r.data),this.isLoading=!1;case 11:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),formatDay:function(t){if(t){var e=t.substring(0,4),a=t.substring(4,6),i=t.substring(6);return e+"年 "+a+"月 "+i+"日"}},handleClick:function(t){this.articleId=t},handleToRecentNews:function(){this.recentNews={},this.active="recentNews",this.getRecentNews()},handleToHotNews:function(){this.hotNews={},this.active="hotNews",this.getHotNews()},handleToDayNews:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.dayNews=[],this.active="dayNews",this.dayTime=Date.now()+864e5,t.next=5,this.getDayNews();case 5:e=document.getElementById("dailylist"),a=1;case 7:if(!a){t.next=20;break}if(!(e.scrollHeight>e.clientHeight)){t.next=12;break}return t.abrupt("break",20);case 12:return this.dayTime-=864e5,t.next=15,this.getDayNews();case 15:if(a++,!(a>=20)){t.next=18;break}return t.abrupt("break",20);case 18:t.next=7;break;case 20:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),scrollLoadDayNews:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e){var a;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.currentTarget,1!=this.isLoading){t.next=3;break}return t.abrupt("return");case 3:if(!(a.scrollTop+a.clientHeight>=a.scrollHeight-1)){t.next=9;break}return this.isLoading=!0,this.dayTime-=864e5,t.next=8,this.getDayNews();case 8:this.isLoading=!1;case 9:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}()},mounted:function(){this.$nextTick(function(){this.getRecentNews()})}},N=x,k=(a("a755"),a("42a6"),Object(f["a"])(N,n,s,!1,null,"d1729470",null)),T=k.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(t){return t(T)}}).$mount("#app")},"7a34":function(t,e,a){"use strict";var i=a("ec9d"),n=a.n(i);n.a},a755:function(t,e,a){"use strict";var i=a("d4b3"),n=a.n(i);n.a},d4b3:function(t,e,a){},ec9d:function(t,e,a){}});
//# sourceMappingURL=zhihuribao.4fba4e47.js.map